# Merge Notes: feature/lab3-custom-dns → main

## Files to Keep on Feature Branch (DO NOT merge to main)

These files contain the custom DNS image creation workflow and testing artifacts:

### Build Artifacts
- `LAB3_IMPLEMENTATION.md` - Implementation summary and testing notes
- `deleteme.md` - Original prompt and notes
- `prompt.md` - LLM prompt for image creation

### Temporary Files
- Any `*.tfstate` files
- Any `terraform.tfvars` with actual values
- SSH keys in `.ssh/dns_image_builder_key*`

### Image Build Process
**Decision:** Keep `scripts/build-dns-image.sh` and `docs/LAB3_IMAGE_BUILD.md` on main
- Students/instructors need these to rebuild the image if needed
- They're documentation and tooling, not secrets

## Files to Merge to Main

✅ **Core Lab 3 Implementation:**
- `main.tf` (DNS server VM resources)
- `variables.tf` (custom_dns_image_id variable)
- `outputs.tf` (DNS server outputs)
- `labs/lab3/README.md` (student guide)
- `cloud-init-dns.yaml` (alternative deployment method)
- `scripts/build-dns-image.sh` (image build script)
- `docs/LAB3_IMAGE_BUILD.md` (image build documentation)

## Pre-Merge Checklist

Before merging to main:
- [ ] Remove `LAB3_IMPLEMENTATION.md`
- [ ] Remove `deleteme.md`
- [ ] Remove `prompt.md`
- [ ] Update `.gitignore` to remove the Lab 3 hide comment
- [ ] Ensure terraform.tfvars is gitignored
- [ ] Verify no SSH keys are committed
- [ ] Test clean deployment on main branch
- [ ] Update main README.md to include Lab 3

## Image Distribution Strategy

**For Students:**
1. Provide the pre-built image ID in documentation
2. Image location: `/subscriptions/.../rg-dns-lab-images-20251129022831/.../dns-server-lab3-bind9`
3. Students add this to their terraform.tfvars
4. If image becomes unavailable, instructor rebuilds using `scripts/build-dns-image.sh`

**Image Persistence:**
- Image is stored in separate RG: `rg-dns-lab-images-*`
- NOT destroyed by `terraform destroy` of lab infrastructure
- Can be shared across subscriptions/regions if needed
